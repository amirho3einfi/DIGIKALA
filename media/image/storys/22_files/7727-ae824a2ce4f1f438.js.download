(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7727],{88375:function(e,s,t){"use strict";t.d(s,{n:function(){return g}});var n=t(66383),i=t(52322),o=t(2784),a=t(57931),r=t(11559),l=t(98634),u=t(72677),c=t(45227),d=t(1324),m=(0,d.q)({url:function(e){var s=e.username;return"magnet/users/".concat(s,"/follow/")},type:c.XN.POST}),x=(0,d.q)({url:function(e){var s=e.username;return"magnet/users/".concat(s,"/unfollow/")},type:c.XN.POST});function g(e){var s=e.className,t=e.username,c=e.isFollowing,d=e.onSuccess,g=void 0===d?l.ZT:d,p=e.color,f=e.size,v=(0,n.Z)((0,o.useState)(c),2),h=v[0],j=v[1];(0,o.useEffect)(function(){j(c)},[c]);var N=(0,r.E)({apiMethod:m,onSuccess:function(){j(!0),g(!0)}}),w=N.request,C=N.pending,b=(0,r.E)({apiMethod:x,onSuccess:function(){j(!1),g(!1)}}),P=b.request,_=b.pending;return(0,i.jsx)(a.z,{className:(0,u.d)(s,"whitespace-nowrap"),label:h?"دنبال شده":"دنبال کن",shape:h?"outlined":"filled",color:void 0===p?"primary":p,size:void 0===f?"medium":f,loading:C||_,onClick:function(){h?P({username:t}):w({username:t})}})}},31192:function(e,s,t){"use strict";t.d(s,{E:function(){return l}});var n=t(52322),i=t(98780),o=t(72677),a=t(73186),r=t.n(a);function l(e){var s=e.className,t=e.direction,a=e.onClick,l="chevron".concat(t[0].toUpperCase()).concat(t.slice(1));return(0,n.jsx)("div",{onClick:a,className:(0,o.d)(s,"p-2 rounded-circle border-complete absolute bottom-0 top-0 m-auto h-max bg-neutral-000 cursor-pointer",r()[t]),children:(0,n.jsx)(i.J,{icon:l,color:"low-emphasis",size:24})})}},57727:function(e,s,t){"use strict";t.d(s,{I:function(){return ei}});var n=t(52322),i=t(5632),o=t(26442),a=t(64177),r=t(41435),l=t(70865),u=t(26297),c=t(2784),d=t(50603),m=t(72677),x=t(93053),g=t(31192),p=t(54925),f=t.n(p);function v(e){var s=e.isOpen,t=e.onDismiss,i=e.onNextPostButtonClick,o=e.onPreviousPostButtonClick,a=e.hasNextButton,r=void 0!==a&&a,p=e.hasPreviousButton,v=void 0!==p&&p,h=(0,u.Z)(e,["isOpen","onDismiss","onNextPostButtonClick","onPreviousPostButtonClick","hasNextButton","hasPreviousButton"]);return(0,c.useEffect)(function(){var e=function(e){var s=e.key;v&&"ArrowRight"===s&&o(),r&&"ArrowLeft"===s&&i()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[o,i,r,v]),(0,n.jsxs)(d.Modal,{shouldCloseOnPageChange:!1,isOpen:s,onDismiss:t,headerTitle:"پست‌ها",width:950,height:670,isOverflowYVisible:!0,headerHasBorderRadius:!0,headerClassName:(0,m.d)(f().header,"px-5"),layoutClassName:f().modalBody,childrenClassName:"h-full py-4 px-5",children:[r&&!!i&&(0,n.jsx)(g.E,{onClick:i,direction:"left"}),v&&!!o&&(0,n.jsx)(g.E,{onClick:o,direction:"right"}),(0,n.jsx)(x.e,(0,l.Z)({},h))]})}var h=t(66383),j=t(50930),N=t(72610),w=t(97411),C=t(72873),b=t(1324),P=t(96207),_=(0,b.q)({url:function(e){var s=e.username;return"/magnet/profile-suggestions/".concat(s,"/")},transformer:function(e){var s,t=(e.data||{}).suggested_users;return{users:(null==t?void 0:null===(s=t.map)||void 0===s?void 0:s.call(t,function(e){return(0,P.s)({data:e})}))||[]}}}),y=t(98780),k=t(31909),D=t(98723),I=t(88375),B=t(98204),U=t.n(B);function E(e){var s=e.user,t=e.onUserDeleted,i=s||{},a=i.photo,r=i.name,l=i.username,u=i.isFollowing;return(0,n.jsxs)("div",{className:(0,m.d)("flex flex-col gap-2 items-center justify-center border-complete rounded p-3 ml-3",U().SuggestedUsersItem),children:[(0,n.jsxs)("div",{className:"px-6 relative",children:[(0,n.jsx)(y.J,{className:"absolute left-0 top-0",icon:"close",color:"low-emphasis",onClick:function(){return t(l)}}),(0,n.jsx)(D.r,{to:(0,o.kK)(l),children:(0,n.jsx)(k.E,{imageClassName:"rounded-circle",image:a,src:"/statics/img/svg/profile/magnet-default-avatart.svg",height:72,width:72})})]}),(0,n.jsx)("div",{className:"text-body-1 text-neutral-800 text-center w-full ellipsis",children:r}),(0,n.jsx)(I.n,{className:"w-full",isFollowing:u,username:l})]})}function S(e){var s,t=e.className,i=e.user,o=(0,C.V)({apiMethod:_,apiData:{username:null==i?void 0:i.username},disabled:(0,r.x)(null==i?void 0:i.username)}),a=o.data,l=o.pending,u=(a||{}).users,d=(0,h.Z)((0,c.useState)([]),2),m=d[0],x=d[1],g=function(e){x((0,j.Z)(m).concat([e]))},p=null==u?void 0:null===(s=u.filter)||void 0===s?void 0:s.call(u,function(e){var s=e.username;return!m.includes(s)});return(0,r.x)(p)?null:(0,n.jsx)("div",{className:t,children:l?(0,n.jsx)(N.g,{className:"my-10"}):(0,n.jsxs)("div",{className:"lg:border-complete-b lg:border-complete-t pt-6 pb-3",children:[(0,n.jsx)("div",{className:"text-h5 text-neutral-800 mb-3",children:"کاربران پیشنهادی"}),(0,n.jsx)(w.l,{spaceBetween:0,items:p.map(function(e){return(0,n.jsx)(E,{user:e,onUserDeleted:g},e.username)})})]})})}var O=t(57033),F=t(14061),L=t(70582),M=t(82332),T={IMAGE:"image",VIDEO:"video"};function V(e){var s=e.isUserOwnProfile;return(0,n.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,n.jsx)(k.E,{width:200,height:150,src:s?"/statics/img/png/magnet/profile/magnet-profile-own-profile-empty.png":"/statics/img/png/magnet/profile/profile-empty-state.png"}),s?(0,n.jsxs)("div",{className:"text-body1-strong mt-3 text-center text-neutral-600",children:[(0,n.jsx)("p",{children:"هنوز هیچ پستی نداری؟"}),(0,n.jsx)("p",{children:"همین حالا تجربه خریدت رو با میلیون‌ها"}),(0,n.jsx)("p",{children:"دیجی‌کالایی به اشتراک بذار!"})]}):(0,n.jsx)("div",{className:"text-body1-strong mt-2 text-neutral-600",children:"هنوز هیچ محتوایی پست نکرده!"})]})}var z=t(31354),q=t.n(z);function Z(e){var s=e.posts,t=e.postsPager,i=e.fetchPage,o=e.pending,l=e.className,u=e.onPostClick,d=e.isUserProfile,x=(0,a.C)().isDesktop,g=(0,c.useCallback)(function(e){var s=e||{},t=s.postId,i=s.postMedia,o=(0,M.t)(null==i?void 0:i[0].postMediaType,T.VIDEO);return(0,r.x)(t)?(0,n.jsx)(F.O,{radiusSize:"0",width:x?220:119,height:x?220:119,itemClassName:"m-2 aspect-square"}):(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsx)("div",{className:"absolute z-1 pointer-events-none",children:(0,n.jsx)(y.J,{icon:"playVideo",size:48,color:"white"})}),(0,n.jsx)(k.E,{onClick:function(){u(e)},image:o?null==i?void 0:i[0].postMediaBigCover:(0,L.W)({data:null==i?void 0:i[0].postMediaUrl}),objectFit:"cover",imageClassName:"aspect-square",className:(0,m.d)("flex cursor-pointer",q().postViewImage)},t)]})},[]);return(null==t?void 0:t.pagerCurrentPage)===1&&o&&(0,r.x)(s)?(0,n.jsx)(N.g,{className:"my-20"}):(0,r.x)(s)&&!o?(0,n.jsx)(V,{isUserOwnProfile:void 0!==d&&d}):(0,n.jsx)("div",{className:l,children:(0,n.jsx)(O.S,{itemComponent:g,items:s,pager:t,itemsPerRow:3,spaceBetween:1,itemHasBorder:!1,fetchPage:i,pending:o,itemClassName:"flex justify-center items-center",hidePagination:!0})})}var A=t(78410),J=t(57931),R=t(838),H=t.n(R);function X(e){var s=e.className,t=e.username,i=e.sellerInfo,a=e.isUserProfile,l=e.isFollowing,u=(0,m.d)("whitespace-nowrap w-full",H().button);return(0,n.jsx)("div",{className:s,children:a?(0,n.jsx)(J.z,{className:u,mode:"outlined",to:o.nF,children:"ویرایش پروفایل"}):(0,n.jsxs)("div",{className:"flex gap-3",children:[!(0,r.x)(null==i?void 0:i.sellerCode)&&(0,n.jsx)(J.z,{className:u,mode:"outlined",to:(0,o.cU)(null==i?void 0:i.sellerCode),children:"فروشگاه"}),(0,n.jsx)(I.n,{className:u,isFollowing:l,username:t})]})})}var G=t(3162),K=t.n(G);function W(e){var s=e.user,t=(0,a.C)().isDesktop,i=s||{},o=i.photo,l=i.badge,u=t?100:72;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(k.E,{className:"shrink-0",imageClassName:"rounded-circle",src:"/statics/img/svg/profile/magnet-default-avatart.svg",image:o,height:u,width:u}),!(0,r.x)(null==l?void 0:l.userBadgeLogo)&&(0,n.jsx)("div",{className:(0,m.d)("absolute right-0 bottom-0 bg-neutral-000 rounded-circle",K().badge__container),children:(0,n.jsx)(k.E,{width:20,height:20,image:l.userBadgeLogo})})]})}var Q=t(47140),Y=t(96879);function $(e){var s=e.value,t=e.name,i=e.isDisabled,o=e.to,a=e.isLoading;return(0,n.jsxs)(D.r,{className:(0,m.d)("flex flex-col items-center lg:w-full",{"cursor-pointer":o&&!i}),to:o,children:[(0,n.jsx)("div",{children:void 0!==a&&a?(0,n.jsx)(F.O,{width:20,height:6}):(0,n.jsx)(Y.I,{value:s,valueClassName:(0,m.d)("text-h5",i?"text-neutral-300":"text-neutral-800"),unitClassName:(0,m.d)("text-h5",i?"text-neutral-300":"text-neutral-800")})}),(0,n.jsx)("span",{className:"text-neutral-500 text-body-2",children:t})]})}var ee=t(18453),es=t.n(ee);function et(e){var s=e.user,t=e.postsCount,i=e.isUserProfile,r=e.isStatisticsLoading,l=(0,a.C)().isDesktop,u=s||{},c=u.followingCount,d=u.followersCount,x=u.username,g=[{name:"دنبال‌کننده",value:d,isDisabled:!i&&0===d,to:(0,o.Ue)(x,Q.v.followers)},{name:"دنبال‌شونده",value:c,isDisabled:!i&&0===c,to:(0,o.Ue)(x,Q.v.following)},{name:"پست‌ها",value:t}];return(0,n.jsx)("div",{className:"flex lg:justify-between justify-start gap-3 lg:gap-0 items-center w-full",children:g.map(function(e,s){var t=e.name,i=e.value,o=e.isDisabled,a=e.to;return(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)($,{name:t,value:i,to:a,isDisabled:o,isLoading:r}),s!==g.length-1&&l&&(0,n.jsx)("div",{className:(0,m.d)("border-complete-r-200",es().Divider)})]},s)})})}function en(e){var s=e.className,t=e.user,i=e.postsCount,o=e.isUserProfile,r=e.isFollowing,l=e.isStatisticsLoading,u=(0,a.C)().isDesktop,c=t||{},d=c.name,m=c.bio,x=c.username,g=c.sellerInfo;return(0,n.jsxs)("div",{className:s,children:[(0,n.jsxs)("div",{className:"px-8 lg:px-6 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center lg:gap-4 gap-6",children:[(0,n.jsx)(W,{user:t}),(0,n.jsx)(et,{user:t,postsCount:i,isUserProfile:o,isStatisticsLoading:void 0!==l&&l}),u&&(0,n.jsx)(X,{isUserProfile:o,isFollowing:r,username:x,sellerInfo:g})]}),(0,n.jsx)("span",{className:"text-h4 text-neutral-800 mt-2 lg:mt-3",children:d}),(0,n.jsx)("span",{className:"text-body-1 text-neutral-500",children:m})]}),!u&&(0,n.jsx)(X,{className:"mt-3 px-5",isUserProfile:o,isFollowing:r,username:x,sellerInfo:g})]})}function ei(e){var s=e.user,t=e.posts,l=e.postsPager,u=e.isUserProfile,c=e.isFollowing,d=e.fetchPage,m=e.pending,x=e.activePostInModal,g=e.setActivePostInModal,p=(0,a.C)().isDesktop,f=(0,i.useRouter)(),h=Boolean(x),j=function(e){return function(){if(x){var s=x.itemIndex+e,n=t[s];if(!(s<0)){if(!n&&s+1<(null==l?void 0:l.pagerTotalItems))return d(l.pagerCurrentPage+1);g(n)}}}};return!m&&(0,r.x)(s)&&!u?(0,n.jsx)("div",{className:"my-10",children:(0,n.jsx)(A.T,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(en,{className:"mt-2 mb-5",user:s,postsCount:(null==l?void 0:l.pagerTotalItems)||0,isUserProfile:u,isFollowing:c,isStatisticsLoading:m&&(0,r.x)(s)}),(0,n.jsx)(S,{user:s,className:"mb-5 pr-5 lg:px-6"}),(0,n.jsx)(Z,{className:"lg:mx-6",posts:t,postsPager:l,fetchPage:d,pending:m,onPostClick:function(e){p?g(e):f.push((0,o.SQ)(e.postId))},isUserProfile:u}),(0,n.jsx)(v,{post:x,pending:m,isOpen:h,onDismiss:function(){return g(null)},onNextPostButtonClick:j(1),onPreviousPostButtonClick:j(-1),hasNextButton:(null==x?void 0:x.itemIndex)+1<(null==l?void 0:l.pagerTotalItems),hasPreviousButton:(null==x?void 0:x.itemIndex)>0})]})}},47140:function(e,s,t){"use strict";t.d(s,{v:function(){return n}});var n={followers:0,following:1}},73186:function(e){e.exports={right:"styles_right__bWd56",left:"styles_left__9JtiE"}},54925:function(e){e.exports={header:"styles_header__sq7Vp",modalBody:"styles_modalBody__KDOV_"}},98204:function(e){e.exports={SuggestedUsersItem:"styles_SuggestedUsersItem__DZ2ek"}},838:function(e){e.exports={button:"styles_button__osH_P"}},3162:function(e){e.exports={badge__container:"styles_badge__container__gn15X"}},18453:function(e){e.exports={Divider:"styles_Divider__GD_0T"}},31354:function(e){e.exports={postViewImage:"styles_postViewImage__xxeAC"}}}]);