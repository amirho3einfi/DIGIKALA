"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1728],{26956:function(e,s,n){n.d(s,{x:function(){return l}});var t=n(52322),i=n(57931),o=n(98780),a=n(52216),r=n(72677);function l(e){var s=e.className,n=e.classNamePadding,l=e.feedbackContentClass,c=e.likeCount,d=e.dislikeCount,u=e.onLike,m=e.onDislike,x=e.isComments,w=void 0!==x&&x,h=e.isLoadingLike,p=e.isLoadingDislike,A=e.isLike,f=e.isDislike,k=e.thumbsUpCroId,j=e.thumbsDownCroId,q=(0,r.d)("flex items-center text-neutral-500",void 0===n?"pt-3":n,s),N=(0,r.d)("text-body-2 lg:ml-10",l,{"hidden lg:block":!w}),v=(0,r.d)({"text-hint-text-success":A,"text-neutral-400":!A}),I=(0,r.d)({"text-hint-text-error":f,"text-neutral-400":!f}),L=(0,r.d)("mr-1",{"text-hint-success-text":A,"text-neutral-400":!A}),b=(0,r.d)("mr-1",{"text-hint-text-error":f,"text-neutral-400":!f});return(0,t.jsxs)("div",{className:q,children:[!w&&(0,t.jsx)("p",{className:N,children:"آیا این پاسخ مفید بود؟"}),(0,t.jsxs)("div",{className:"mr-auto lg:mr-0 flex items-center",children:[(0,t.jsx)(i.z,{isLoading:h,onClick:u,hasCustomMode:!0,mode:"text",size:"small",className:v,CROId:k,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:(0,a.U)(void 0===c?0:c)}),(0,t.jsx)(o.J,{icon:"thumbsUp",className:L,size:20,color:A?"success":"low-emphasis"})]})}),(0,t.jsxs)(i.z,{isLoading:p,onClick:m,hasCustomMode:!0,mode:"text",removePadding:!0,className:I,CROId:j,children:[(0,t.jsx)("p",{children:(0,a.U)(void 0===d?0:d)}),(0,t.jsx)(o.J,{icon:"thumbsDown",className:b,size:20,color:f?"error":"low-emphasis"})]})]})]})}},31969:function(e,s,n){n.d(s,{d:function(){return t}});var t={LIKE:"like",DISLIKE:"dislike"}},55059:function(e,s,n){n.d(s,{u:function(){return t}});function t(e){var s=e.data||{};return{dislikes:s.dislikes,likes:s.likes}}},21728:function(e,s,n){n.d(s,{Q:function(){return f}});var t=n(66383),i=n(52322),o=n(2784),a=n(98780),r=n(72677),l=n(41435),c=n(57931),d=n(65380);function u(e){var s=e.openAnswerModal,n=e.buttonText,t=e.CROId,o=e.className;return(0,i.jsx)("div",{className:(0,r.d)("mr-10",o),children:(0,i.jsxs)(c.z,{mode:"text",size:"small",color:"secondary",onClick:s,CROId:t,className:"mt-3 text-secondary-500",children:[n,(0,i.jsx)(a.J,{icon:"chevronLeft",color:"secondary",size:16,className:"mx-2"})]})})}var m=n(74808),x=n(73739);function w(e){var s=e.className;return(0,i.jsx)(x.k,{className:s,icon:"infoOutline",children:"پاسخ شما ثبت شد و پس از بررسی و تایید نمایش داده خواهد شد."})}function h(e){var s=e.answers,n=e.questionText,t=e.submitted,o=e.showAllAnswers,r=e.setShowAllAnswers,l=e.openAnswerModal,x=e.className,h=e.disableReplayAction;return o||1===s.length?(0,i.jsxs)("div",{className:x,children:[s.map(function(e){return(0,i.jsx)(d.s,{className:"br-list-vertical-no-padding",questionAnswer:e,questionText:n},e.questionAnswerId)}),t?(0,i.jsx)(w,{}):!h&&(0,i.jsx)(u,{className:"border-complete-t mt-4",buttonText:"ثبت پاسخ جدید",openAnswerModal:l})]}):s.length>1?(0,i.jsxs)("div",{className:x,children:[(0,i.jsx)(d.s,{questionAnswer:s[0],questionText:n}),(0,i.jsxs)(c.z,{shape:"text",color:"secondary",onClick:function(){r(!0),(0,m.y0)({type:"more_answers"})},className:"mt-2 mb-3 pr-0 mr-10 font-bold text-secondary-500",children:["مشاهده‌ی پاسخ‌های دیگر",(0,i.jsx)(a.J,{icon:"expandMore",color:"secondary",className:"mx-2",size:24})]})]}):null}function p(e){var s=e.submitted,n=e.openAnswerModal,t=e.className,o=e.disableReplayAction;return s?(0,i.jsx)(w,{className:(0,r.d)("mt-4",t)}):(0,i.jsx)("div",{className:(0,r.d)("mt-4",t),children:o?null:(0,i.jsx)("div",{className:"border-complete-t",children:(0,i.jsx)(u,{buttonText:"ثبت پاسخ‌",CROId:"pdp-answer",openAnswerModal:n})})})}var A=(0,o.memo)(function(e){var s=e.answers,n=e.questionId,a=e.questionText,r=e.showAllAnswers,c=e.setShowAllAnswers,d=e.openAnswerModal,u=e.disableReplayAction,m=(0,t.Z)((0,o.useState)(!1),2),x=m[0],w=m[1],A=function(){w(!0)},f=function(){d({questionId:n,questionText:a,successCallback:A})};return(0,l.x)(s)?(0,i.jsx)(p,{submitted:x,openAnswerModal:f,disableReplayAction:u}):(0,i.jsx)(h,{answers:s,questionText:a,submitted:x,showAllAnswers:r,setShowAllAnswers:c,openAnswerModal:f,disableReplayAction:u})});function f(e){var s=e.className,n=e.question,l=e.disableReplayAction,c=e.openAnswerModal,d=n||{},u=d.questionAnswers,m=d.questionText,x=d.questionId,w=(0,t.Z)((0,o.useState)(!1),2),h=w[0],p=w[1];return(0,i.jsxs)("article",{className:(0,r.d)(s,"py-3"),children:[(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"mt-1 ml-4",children:(0,i.jsx)(a.J,{icon:"question",color:"secondary",size:24})}),(0,i.jsx)("p",{className:"text-subtitle w-full",children:m})]}),(0,i.jsx)(A,{questionId:x,answers:u,questionText:m,showAllAnswers:h,setShowAllAnswers:p,openAnswerModal:c,disableReplayAction:l})]})}},65380:function(e,s,n){n.d(s,{s:function(){return y}});var t=n(66383),i=n(52322),o=n(2784),a=n(17165),r=n(45756),l=n(66781),c=n(82650),d=n(11559),u=n(40565),m=n(74808),x=n(41435),w=n(55059),h=n(45227),p=n(1324),A=n(12694),f=(0,p.q)({type:h.XN.POST,url:function(e){var s=e.answerId;return"answers/".concat(s,"/like/")},inputTransformer:function(e){var s=e.type;return(0,A.s)({type:s})},transformer:w.u}),k=n(26956),j=n(31969),q=n(98780),N=n(31909),v=n(61695),I=n(82332),L=n(72677);function b(e){var s=e.className,n=e.media,t=e.onClick,o=n.mediaUrl,a=n.mediaType,r=n.mediaThumbnailUrl,l=(0,I.t)(a,v.L.VIDEO);return(0,i.jsxs)("div",{className:(0,L.d)(s,"relative cursor-pointer"),onClick:t,children:[(0,i.jsx)(N.E,{alt:"question-answer-media",src:l?r:o,rounded:8,height:50,width:50}),l&&(0,i.jsx)(q.J,{size:24,className:"absolute bottom-0 left-0",icon:"playSimple",color:"white"})]})}function y(e){var s=e.className,n=e.questionAnswer,w=e.questionText,h=e.isInDetailModal,p=n||{},A=p.questionAnswerId,q=p.questionAnswerText,N=p.questionAnswerType,v=p.questionAnswerSender,I=p.questionAnswerUserReaction,L=p.questionAnswerReactionsLikes,y=p.questionAnswerHasQABadge,C=p.questionAnswerReactionsDisLikes,R=p.questionAnswerMedias,D=(0,t.Z)((0,o.useState)([I].includes(j.d.LIKE)),2),g=D[0],S=D[1],T=(0,t.Z)((0,o.useState)([I].includes(j.d.DISLIKE)),2),E=T[0],M=T[1],z=(0,t.Z)((0,o.useState)({questionAnswerReactionsLikes:L,questionAnswerReactionsDisLikes:C}),2),U=z[0],K=z[1],O=function(e){var s=e||{},t=s.likes,i=s.dislikes;K({questionAnswerReactionsLikes:t,questionAnswerReactionsDisLikes:i}),n.questionAnswerReactionsDisLikes=i,n.questionAnswerReactionsLikes=t},_=(0,d.E)({apiMethod:f,onSuccess:O}),P=_.request,J=_.pending,Z=(0,d.E)({apiMethod:f,onSuccess:O}),Q=Z.request,B=Z.pending,F=(0,c.z)().emit;return(0,u.x)([{event:l.s6,handler:function(e){A===e.questionAnswerId&&(M([I].includes(j.d.DISLIKE)),S([I].includes(j.d.LIKE)),K({questionAnswerReactionsLikes:L,questionAnswerReactionsDisLikes:C}))}}]),(0,i.jsxs)("div",{className:s,children:[(0,i.jsxs)("div",{className:"flex items-center mt-4 text-neutral-600",children:[(0,i.jsx)("p",{className:"text-caption ml-4",children:"پاسخ"}),(0,i.jsx)("div",{className:"grow",children:(0,i.jsx)("p",{className:"text-body-1",children:q})})]}),(0,i.jsxs)("div",{className:"flex flex-col items-start justify-center mr-10",children:[!h&&!(0,x.x)(R)&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mt-3 lg:mb-3 mb-4",children:R.map(function(e,s){return(0,i.jsx)(b,{media:e,onClick:function(){return F(l.P8,{questionAnswer:n,questionText:w,mediaIndex:s})}})})}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("p",{className:"text-caption text-neutral-400",children:v}),y?(0,i.jsx)(a.C,{size:"small",text:"نماینده برند",textClasses:"text-neutral-000",bgColor:"neutral-400"}):"buyer"===N?(0,i.jsx)(a.C,{size:"small",text:"خریدار",type:"success"}):"seller"===N?(0,i.jsx)(a.C,{size:"small",text:"فروشنده",type:"success"}):null]}),(0,i.jsx)(k.x,{onLike:function(){P({type:j.d.LIKE,answerId:A}).then(function(e){e.likes>U.questionAnswerReactionsLikes?(S(!0),n.questionAnswerUserReaction=j.d.LIKE):(S(!1),n.questionAnswerUserReaction="")}).finally(function(){M(!1)}),(0,m.y6)({type:"Like"})},isLike:g,className:"mr-auto",onDislike:function(){Q({answerId:A,type:j.d.DISLIKE}).then(function(e){e.dislikes>U.questionAnswerReactionsDisLikes?(M(!0),n.questionAnswerUserReaction=j.d.DISLIKE):(M(!1),n.questionAnswerUserReaction="")}).finally(function(){S(!1)}),(0,m.y6)({type:"Dislike"})},isDislike:E,isLoadingLike:J,isLoadingDislike:B,likeCount:null==U?void 0:U.questionAnswerReactionsLikes,dislikeCount:null==U?void 0:U.questionAnswerReactionsDisLikes,thumbsUpCroId:r.h.PDP_QUESTION_LIKE,thumbsDownCroId:r.h.PDP_QUESTION_DISLIKE})]})]})}}}]);